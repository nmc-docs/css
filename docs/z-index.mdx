---
sidebar_position: 17
---

# Z-index

## Gi·ªõi thi·ªáu

:::info

- `z-index` l√† thu·ªôc t√≠nh CSS ki·ªÉm so√°t th·ª© t·ª± x·∫øp ch·ªìng (stacking order) c·ªßa c√°c ph·∫ßn t·ª≠ ƒë·ªãnh v·ªã (positioned elements) d·ªçc theo tr·ª•c Z (tr·ª•c chi·ªÅu s√¢u).

:::

```css
.element {
  position: relative | absolute | fixed | sticky;
  z-index: value;
}
```

:::caution[L∆∞u √Ω]

- L∆∞u √Ω quan tr·ªçng: `z-index` ch·ªâ c√≥ t√°c d·ª•ng v·ªõi c√°c ph·∫ßn t·ª≠ c√≥ thu·ªôc t√≠nh `position` kh√°c `static` (m·∫∑c ƒë·ªãnh).

:::

## C∆° b·∫£n v·ªÅ z-index

### Gi√° tr·ªã m·∫∑c ƒë·ªãnh

- M·ªçi ph·∫ßn t·ª≠ c√≥ `z-index: auto` (t∆∞∆°ng ƒë∆∞∆°ng v·ªõi `z-index: 0` trong c√πng m·ªôt stacking context).

### Th·ª© t·ª± x·∫øp ch·ªìng m·∫∑c ƒë·ªãnh (kh√¥ng c√≥ z-index)

- Khi kh√¥ng c√≥ `z-index` ƒë∆∞·ª£c thi·∫øt l·∫≠p, th·ª© t·ª± x·∫øp ch·ªìng t·ª´ d∆∞·ªõi l√™n tr√™n l√†:

1. N·ªÅn v√† vi·ªÅn c·ªßa ph·∫ßn t·ª≠ g·ªëc
2. C√°c ph·∫ßn t·ª≠ con kh√¥ng ƒë·ªãnh v·ªã (non-positioned), theo th·ª© t·ª± trong HTML
3. C√°c ph·∫ßn t·ª≠ con ƒë·ªãnh v·ªã (positioned), theo th·ª© t·ª± trong HTML

### V√≠ d·ª• c∆° b·∫£n

```jsx live
// Trong v√≠ d·ª• n√†y, Blue s·∫Ω n·∫±m tr√™n c√πng v√¨ xu·∫•t hi·ªán cu·ªëi c√πng trong HTML.
function ZIndexExampleCmp1() {
  const boxBaseStyle = {
    width: "200px",
    height: "200px",
    position: "absolute",
  };

  return (
    <div style={{ position: "relative", height: "500px" }}>
      <div
        style={{
          ...boxBaseStyle,
          backgroundColor: "rgba(255, 0, 0, 0.8)",
          top: "50px",
          left: "50px",
        }}
      >
        Red (z-index: auto)
      </div>

      <div
        style={{
          ...boxBaseStyle,
          backgroundColor: "rgba(0, 255, 0, 0.8)",
          top: "100px",
          left: "100px",
        }}
      >
        Green (z-index: auto)
      </div>

      <div
        style={{
          ...boxBaseStyle,
          backgroundColor: "rgba(0, 0, 255, 0.8)",
          top: "150px",
          left: "150px",
        }}
      >
        Blue (z-index: auto)
      </div>
    </div>
  );
}
```

## Ng·ªØ c·∫£nh x·∫øp ch·ªìng (Stacking Context)

### Kh√°i ni·ªám

- **Stacking context** l√† m·ªôt nh√≥m c√°c ph·∫ßn t·ª≠ c√≥ c√πng ng·ªØ c·∫£nh x·∫øp ch·ªìng. M·ªói stacking context ho√†n to√†n ƒë·ªôc l·∫≠p v·ªõi c√°c stacking context kh√°c.

### C√°ch ho·∫°t ƒë·ªông

- M·ªói stacking context c√≥ "g·ªëc" ri√™ng
- `z-index` ch·ªâ so s√°nh ƒë∆∞·ª£c trong c√πng m·ªôt stacking context
- Ph·∫ßn t·ª≠ con kh√¥ng th·ªÉ v∆∞·ª£t ra ngo√†i stacking context c·ªßa cha n√≥

## C√°c thu·ªôc t√≠nh t·∫°o stacking context

M·ªôt s·ªë thu·ªôc t√≠nh CSS t·∫°o stacking context m·ªõi:

1. **Position kh√°c static + z-index kh√°c auto**
2. **Opacity < 1**
3. **Transform kh√°c none**
4. **Filter kh√°c none**
5. **Mix-blend-mode kh√°c normal**
6. **Isolation: isolate**
7. **Clip-path kh√°c none**
8. **Mask/mask-image/mask-border kh√°c none**
9. **Perspective kh√°c none**
10. **Will-change v·ªõi gi√° tr·ªã t·∫°o context**

### V√≠ d·ª• v·ªÅ stacking context

```jsx live
function ZIndexExampleCmp2() {
  const containerStyle = {
    position: "relative",
    width: "300px",
    height: "300px",
    background: "#eee",
    zIndex: 1, // t·∫°o stacking context m·ªõi
  };

  const childBaseStyle = {
    position: "absolute",
    width: "200px",
    height: "200px",
  };

  const outsideStyle = {
    position: "absolute",
    width: "200px",
    height: "200px",
    background: "rgba(0, 0, 255, 0.8)",
    top: "120px",
    left: "120px",
    zIndex: 0, // th·∫•p h∆°n container
  };

  return (
    <div style={{ position: "relative", height: "500px" }}>
      <div style={containerStyle}>
        <div
          style={{
            ...childBaseStyle,
            background: "rgba(255, 0, 0, 0.8)",
            top: "20px",
            left: "20px",
            zIndex: 100, // ch·ªâ so s√°nh trong container
          }}
        >
          Child 1 (z-index: 100)
        </div>

        <div
          style={{
            ...childBaseStyle,
            background: "rgba(0, 255, 0, 0.8)",
            top: "40px",
            left: "40px",
            zIndex: 50, // ch·ªâ so s√°nh trong container
          }}
        >
          Child 2 (z-index: 50)
        </div>
      </div>

      <div style={outsideStyle}>Outside (z-index: 0)</div>
    </div>
  );
}
```

Trong v√≠ d·ª• n√†y:

- Child 1 n·∫±m tr√™n Child 2 (v√¨ 100 > 50 trong c√πng stacking context)
- Nh∆∞ng c·∫£ hai ƒë·ªÅu n·∫±m d∆∞·ªõi Outside? KH√îNG! V√¨ container c√≥ `z-index: 1` v√† ƒë√£ t·∫°o stacking context ri√™ng

## V√≠ d·ª•: Opacity t·∫°o stacking context

```jsx live
function ZIndexExampleCmp4() {
  const parentStyle = {
    position: "relative",
    width: "300px",
    height: "200px",
    background: "#eee",
  };

  const childHighStyle = {
    position: "absolute",
    width: "100px",
    height: "100px",
    background: "red",
    bottom: "10px",
    left: "100px",
    zIndex: 100,
  };

  const parentWithOpacityStyle = {
    ...parentStyle,
    background: "#ddd",
    marginTop: "20px",
    opacity: 0.99, // t·∫°o stacking context m·ªõi
  };

  const childLowStyle = {
    position: "absolute",
    width: "100px",
    height: "100px",
    background: "blue",
    top: "10px",
    left: "100px",
    zIndex: 999, // v·∫´n b·ªã gi·ªõi h·∫°n trong parent
  };

  const outsideStyle = {
    position: "absolute",
    top: "150px",
    left: "175px",
    width: "100px",
    height: "100px",
    background: "green",
    zIndex: 50,
  };

  return (
    <div style={{ position: "relative", height: "400px" }}>
      <div style={parentStyle}>
        <div style={childHighStyle}>z-index: 100</div>
      </div>

      <div style={parentWithOpacityStyle}>
        Opacity: 0.99
        <div style={childLowStyle}>z-index: 999 (trong parent c√≥ opacity)</div>
      </div>

      <div style={outsideStyle}>Outside z-index: 50</div>
    </div>
  );
}
```

Trong v√≠ d·ª• tr√™n:

- opacity < 1 ‚áí t·∫°o stacking context, k·ªÉ c·∫£ 0.99
- Kh·ªëi m√†u xanh da tr·ªùi (z-index: 999) kh√¥ng th·ªÉ ƒë√® l√™n kh·ªëi m√†u xanh n∆∞·ªõc bi·ªÉn (z-index: 50)
  üëâ V√¨ parent kh·ªëi xanh da tr·ªùi c√≥ opacity n√™n s·∫Ω t·∫°o stacking context
- Trong khi kh·ªëi ƒë·ªè (z-index: 100) c√≥ th·ªÉ ƒë√® l√™n kh·ªëi xanh n∆∞·ªõc bi·ªÉn
  üëâ V√¨ parent kh·ªëi ƒë·ªè kh√¥ng t·∫°o stacking context

## C√°c gi√° tr·ªã c·ªßa z-index

### Gi√° tr·ªã s·ªë nguy√™n

- C√≥ th·ªÉ d∆∞∆°ng, √¢m, ho·∫∑c 0

```css
.element {
  z-index: -1; /* D∆∞·ªõi c√πng */
  z-index: 0; /* M·ª©c m·∫∑c ƒë·ªãnh */
  z-index: 1; /* Tr√™n m·ª©c m·∫∑c ƒë·ªãnh */
  z-index: 9999; /* Th∆∞·ªùng d√πng cho modal, dropdown */
}
```

### C√°c gi√° tr·ªã ƒë·∫∑c bi·ªát

```css
.element {
  z-index: auto; /* M·∫∑c ƒë·ªãnh, kh√¥ng t·∫°o stacking context m·ªõi */
  z-index: inherit; /* K·∫ø th·ª´a t·ª´ ph·∫ßn t·ª≠ cha */
}
```

## M·ªôt s·ªë v√≠ d·ª• kh√°c

```jsx live
function ZIndexExampleCmp3() {
  const level1Style = {
    position: "relative",
    width: "400px",
    height: "300px",
    background: "#eee",
    margin: "20px",
    padding: "20px",
    zIndex: 1, // t·∫°o stacking context
  };

  const level2Style = {
    position: "absolute",
    width: "300px",
    height: "200px",
    background: "rgba(255, 0, 0, 0.7)",
    top: "50px",
    left: "50px",
    zIndex: 10, // ch·ªâ c√≥ hi·ªáu l·ª±c trong level-1
  };

  const level3Style = {
    position: "absolute",
    width: "200px",
    height: "150px",
    background: "rgba(0, 255, 0, 0.7)",
    top: "100px",
    left: "100px",
    zIndex: 5, // th·∫•p h∆°n level-2 trong c√πng context
  };

  const outsideContextStyle = {
    position: "absolute",
    width: "200px",
    height: "150px",
    background: "rgba(0, 0, 255, 0.7)",
    top: "180px",
    left: "80px",
    zIndex: 2, // cao h∆°n level-1 v√¨ kh√°c stacking context
  };

  return (
    <div style={{ position: "relative", height: "500px" }}>
      <div style={level1Style}>
        <div>Level 1 (z-index: 1, t·∫°o stacking context)</div>

        <div style={level2Style}>Level 2 (z-index: 10)</div>

        <div style={level3Style}>Level 3 (z-index: 5)</div>
      </div>

      <div style={outsideContextStyle}>Outside (z-index: 2)</div>
    </div>
  );
}
```

## T·ªïng k·∫øt

`z-index` l√† c√¥ng c·ª• m·∫°nh m·∫Ω nh∆∞ng c·∫ßn hi·ªÉu r√µ ƒë·ªÉ s·ª≠ d·ª•ng hi·ªáu qu·∫£:

- Ch·ªâ ho·∫°t ƒë·ªông v·ªõi ph·∫ßn t·ª≠ ƒë·ªãnh v·ªã (position kh√°c static)
- Ho·∫°t ƒë·ªông trong ph·∫°m vi stacking context
- Stacking context c√≥ th·ªÉ ƒë∆∞·ª£c t·∫°o b·ªüi nhi·ªÅu thu·ªôc t√≠nh CSS
- N√™n s·ª≠ d·ª•ng h·ªá th·ªëng qu·∫£n l√Ω `z-index` c√≥ t·ªï ch·ª©c
- ∆Øu ti√™n gi·∫£i ph√°p ƒë∆°n gi·∫£n tr∆∞·ªõc khi d√πng `z-index`

Hi·ªÉu r√µ `z-index` v√† stacking context gi√∫p tr√°nh c√°c v·∫•n ƒë·ªÅ v·ªÅ x·∫øp ch·ªìng ph·∫ßn t·ª≠ v√† t·∫°o giao di·ªán ng∆∞·ªùi d√πng ph·ª©c t·∫°p m·ªôt c√°ch ch√≠nh x√°c.
